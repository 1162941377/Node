# Node

1）node 是一个 js 的运行环境

2）它提供了比浏览器更多的操作权限

## 生命周期

> 详情见 PPT

> 对于前端而言，重要的是：三个宏队列 timers、poll、checks，两个微队列 nextTick、promise

1）timers：存放计时器的回调函数

- setTimeout 最少延迟 1 毫秒后执行

2）poll：轮询队列，除了 timers、checks 之外的绝大部分回调函数都会进入该队列中，比如：文件的读取、监听用户请求等

- 运作方式：如果 poll 中有回调，依次执行回调函数，直到清空队列；如果没有，等待其它队列中出现回调函数，立即结束该阶段，进入下个阶段，如果其它队列中也没有回调，则会一直进行等待

3）checkes：检查阶段，使用 setImmediate 的回调函数会直接放入该队列中

_事件循环中，每次打算执行一个回调函数前，必须要先清空 nextTick 和 promise 中的队列；nextTick 的优先级最高_

_其实，没有 timers 队列，当 node 读到计时器的时候，会依次遍历所有的计时器，并进行排序，依次执行；而 checks 队列中的回调函数会直接执行，相当于是一个数组，每次调用 setImmediate 函数时，会直接添加进数组中；因此，在执行效率上，比 setTimeout 快太多_
